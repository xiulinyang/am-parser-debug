It took me a couple of hours to solve this problem.
